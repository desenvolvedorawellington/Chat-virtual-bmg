<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Assistente BMG - Serop√©dica</title>
  <style>
    :root {
      --laranja: #ff6600;
      --azul-verificado: #0075ff;
      --cinza: #f4f4f4;
      --preto: #1a1a1a;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: #fff;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    header {
      background: var(--cinza);
      padding: 1rem;
      display: flex;
      align-items: center;
      border-bottom: 2px solid var(--laranja);
    }

    header img {
      height: 40px;
      margin-right: 10px;
    }

    header span {
      font-weight: bold;
      font-size: 1rem;
      color: var(--preto);
    }

    .chat-box {
      flex: 1;
      overflow-y: auto;
      padding: 1rem;
      display: flex;
      flex-direction: column;
    }

    .message {
      max-width: 80%;
      padding: 0.8rem;
      border-radius: 12px;
      margin-bottom: 0.5rem;
      animation: fadeIn 0.3s ease;
      line-height: 1.5;
    }

    .bot {
      background: var(--cinza);
      align-self: flex-start;
    }

    .user {
      background: var(--laranja);
      color: white;
      align-self: flex-end;
    }

    .typing {
      font-style: italic;
      opacity: 0.6;
      padding: 0.6rem 1rem;
      background: #eee;
      border-radius: 10px;
      width: fit-content;
      animation: blink 1s infinite;
      margin-bottom: 1rem;
    }

    @keyframes blink {
      0% { opacity: 0.6; }
      50% { opacity: 1; }
      100% { opacity: 0.6; }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .input-area {
      display: flex;
      padding: 0.8rem;
      border-top: 1px solid #ddd;
      background: white;
    }

    .input-area input {
      flex: 1;
      padding: 1rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 10px;
      outline: none;
    }

    .input-area button {
      margin-left: 0.5rem;
      background: var(--laranja);
      border: none;
      color: white;
      padding: 0.9rem 1.2rem;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
    }

    footer {
      text-align: center;
      font-size: 0.85rem;
      color: #444;
      padding: 1rem;
      background: #f9f9f9;
    }
  </style>
</head>
<body>
<header>
  <img 
    src="logo-bmg.png" 
    alt="BMG Logo" 
    style="
      width: 140px;
      height: 140px;
      border-radius: 20px;
      object-fit: cover;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    "
  >
  <span>üîí Atendimento virtual Banco BMG</span>
</header>

<div class="chat-box" id="chat">
  <div class="message bot">üëã Ol√°! Sou a Assistente BMG, atendimento digital da nossa unidade em Serop√©dica.<br>Para come√ßar, qual o seu nome completo?</div>
</div>

<div class="input-area">
  <input type="text" id="userInput" placeholder="Digite aqui..." />
  <button onclick="sendMessage()">Enviar</button>
</div>

<footer>
  üìç Av. Ministro Fernando Costa, 744 Lj. B ‚Äì Km 49, Serop√©dica/RJ<br>
  üìû (21) 2682-8618 | üì≤ WhatsApp: <a href="https://wa.me/552126828618" target="_blank">(21) 99851-1703</a>
</footer>

<script>
  const chat = document.getElementById('chat');
  const input = document.getElementById('userInput');
  let etapa = 0;
  let nome = '';
  let opcao = '';
  let descricaoOpcao = '';
  let historico = [];

  function sendMessage() {
    const texto = input.value.trim();
    if (!texto) return;

    appendMessage(texto, 'user');
    input.value = '';
    setTimeout(() => showTyping(() => responder(texto)), 300);
  }

  function appendMessage(texto, tipo) {
    const msg = document.createElement('div');
    msg.className = 'message ' + tipo;
    msg.innerHTML = texto;
    chat.appendChild(msg);
    chat.scrollTop = chat.scrollHeight;
  }

  function showTyping(callback) {
    const typing = document.createElement('div');
    typing.className = 'typing';
    typing.innerText = 'Digitando...';
    chat.appendChild(typing);
    chat.scrollTop = chat.scrollHeight;

    setTimeout(() => {
      typing.remove();
      callback();
    }, 3000);
  }

  function responder(texto) {
    if (etapa === 0) {
      nome = texto;
      historico.push(nome);
      appendMessage(`Muito prazer, ${nome}! Em que posso te ajudar hoje? Digite o n√∫mero da op√ß√£o:<br><br>
        1Ô∏è‚É£ Empr√©stimo Consignado<br>
        2Ô∏è‚É£ Cart√£o BMG<br>
        3Ô∏è‚É£ Portabilidade<br>
        4Ô∏è‚É£ Impress√£o de Fatura / Extrato<br>
        5Ô∏è‚É£ D√∫vida ou Reclama√ß√£o<br>
        6Ô∏è‚É£ Outros assuntos`, 'bot');
      etapa = 1;

    } else if (etapa === 1) {
      opcao = texto;
      etapa = 2;

      switch (texto) {
        case '1':
          descricaoOpcao = 'Empr√©stimo Consignado';
          appendMessage(`${nome}, voc√™ j√° possui um empr√©stimo ativo? Informe tamb√©m seu CPF para consulta.`, 'bot');
          break;
        case '2':
          descricaoOpcao = 'Cart√£o BMG';
          appendMessage(`${nome}, deseja solicitar um novo Cart√£o BMG ou tem d√∫vidas sobre fatura/extrato? Informe tamb√©m seu CPF.`, 'bot');
          break;
        case '3':
          descricaoOpcao = 'Portabilidade';
          appendMessage(`${nome}, qual banco voc√™ deseja trazer sua portabilidade? Informe tamb√©m seu CPF.`, 'bot');
          break;
        case '4':
          descricaoOpcao = 'Impress√£o de Fatura / Extrato';
          appendMessage(`Voc√™ quer imprimir a fatura do cart√£o ou extrato do INSS? Informe seu CPF.`, 'bot');
          break;
        case '5':
          descricaoOpcao = 'D√∫vida ou Reclama√ß√£o';
          appendMessage(`Descreva sua d√∫vida ou problema, por favor. Inclua seu CPF se necess√°rio.`, 'bot');
          break;
        case '6':
          descricaoOpcao = 'Outros assuntos';
          appendMessage(`Pode digitar o assunto que deseja tratar. Informe seu CPF para identifica√ß√£o.`, 'bot');
          break;
        default:
          appendMessage(`Op√ß√£o inv√°lida. Digite um n√∫mero de 1 a 6.`, 'bot');
          etapa = 1;
          return;
      }

      historico.push(descricaoOpcao);

    } else if (etapa === 2) {
      historico.push(texto);

      const relatorio = `Ol√°! Aqui est√° o atendimento autom√°tico realizado:\n\n` +
        historico.map((item, index) => `Etapa ${index + 1}: ${item}`).join('\n');

      const numeroDestino = '552126828618';
      const linkWhatsApp = `https://wa.me/${numeroDestino}?text=${encodeURIComponent(relatorio)}`;

      appendMessage(`‚úÖ Atendimento finalizado! Clique abaixo para enviar seu relat√≥rio direto no WhatsApp üëá`, 'bot');
      appendMessage(`<a class="button" href="${linkWhatsApp}" target="_blank">üì≤ Enviar Relat√≥rio via WhatsApp</a>`, 'bot');
      etapa = 3;
    } else {
      appendMessage(`Aguarde, estou te redirecionando para o atendimento humano...`, 'bot');
    }
  }
</script>

</body>
</html>
